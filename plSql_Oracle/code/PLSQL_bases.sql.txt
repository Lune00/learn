-- BASES BLOC 

DROP TABLE test;
CREATE TABLE test( code NUMBER, nom varchar2(20));
INSERT INTO test VALUES(10,'Jimmy Burger');
COMMIT;

--Extraire un champ dans une colonne d'une table
SELECT nom FROM test WHERE code = 10;

DECLARE 
-- Typage manuel qui match le type de la colonne (SQL)
--v_nom VARCHAR2(20);  
-- Typage automatique (ORACLE):
v_nom test.nom%type;
--Variable de ligne: variable qui peut faire references a toutes les colonnes d'une ligne
v_test test%rowtype;

BEGIN

-- Stocker resultat du SELECT dans la variable v_nom:
SELECT nom INTO v_nom FROM test WHERE code=10; 

--SELECT nom INTO v_test.nom FROM test WHERE code=10; 

SELECT code,nom INTO v_test.code,v_test.nom FROM test WHERE code=10; 

--DBMS_OUTPUT.put_line('Le nom est ' || v_nom);
--DBMS_OUTPUT.put_line('Le nom est ' || v_test.nom);
DBMS_output.put_line(v_test.code ||'-'|| v_test.nom);


END;


--%ROWTYPE : variable de ligne


DECLARE

v_row emp%rowtype;
nombreEmployes NUMERIC;

BEGIN

SELECT sal, ename, deptno 
    INTO v_row.sal, v_row.ename, v_row.deptno
    FROM emp 
    WHERE ename='KING';
    
    SELECT COUNT(*) INTO nombreEmployes FROM emp ;

    DBMS_OUTPUT.put_line(v_row.ename ||'DEP: ' || v_row.deptno || ' SALAIRE: ' || v_row.sal  );
    DBMS_OUTPUT.put_line('Nombre d''employés : ' || nombreEmployes ) ;
END;
/